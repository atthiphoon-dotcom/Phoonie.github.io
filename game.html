<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ping Pong Mobile</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    touch-action: none;
  }

  canvas {
    background: #000;
    border: 3px solid white;
  }
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// Responsive canvas
function resizeCanvas() {
  canvas.width = window.innerWidth * 0.95;
  canvas.height = window.innerHeight * 0.7;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

let ball = {
  x: canvas.width / 2,
  y: canvas.height / 2,
  radius: 8,
  dx: 2,   // slower speed
  dy: 2
};

let paddleWidth = 100;
let paddleHeight = 12;

let player = {
  x: canvas.width / 2 - paddleWidth / 2,
  y: canvas.height - 30,
  width: paddleWidth,
  height: paddleHeight
};

let ai = {
  x: canvas.width / 2 - paddleWidth / 2,
  y: 20,
  width: paddleWidth,
  height: paddleHeight
};

let playerScore = 0;
let aiScore = 0;

// Mouse control (desktop)
canvas.addEventListener("mousemove", movePaddle);

// Touch control (mobile)
canvas.addEventListener("touchmove", function(e) {
  e.preventDefault();
  let rect = canvas.getBoundingClientRect();
  let touch = e.touches[0];
  player.x = touch.clientX - rect.left - player.width / 2;
});

// Shared move function
function movePaddle(e) {
  let rect = canvas.getBoundingClientRect();
  player.x = e.clientX - rect.left - player.width / 2;
}

// Draw paddle
function drawPaddle(p) {
  ctx.fillStyle = "white";
  ctx.fillRect(p.x, p.y, p.width, p.height);
}

// Draw ball
function drawBall() {
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
  ctx.fillStyle = "white";
  ctx.fill();
  ctx.closePath();
}

// Draw score
function drawScore() {
  ctx.font = "18px Arial";
  ctx.fillStyle = "white";
  ctx.fillText("AI: " + aiScore, 10, 25);
  ctx.fillText("You: " + playerScore, 10, canvas.height - 10);
}

// Reset ball
function resetBall() {
  ball.x = canvas.width / 2;
  ball.y = canvas.height / 2;
  ball.dx = 2 * (Math.random() > 0.5 ? 1 : -1);
  ball.dy = 2 * (Math.random() > 0.5 ? 1 : -1);
}

// Game loop
function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawBall();
  drawPaddle(player);
  drawPaddle(ai);
  drawScore();

  ball.x += ball.dx;
  ball.y += ball.dy;

  // Wall bounce
  if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) {
    ball.dx *= -1;
  }

  // Player collision
  if (
    ball.y + ball.radius > player.y &&
    ball.x > player.x &&
    ball.x < player.x + player.width
  ) {
    ball.dy *= -1;
  }

  // AI collision
  if (
    ball.y - ball.radius < ai.y + ai.height &&
    ball.x > ai.x &&
    ball.x < ai.x + ai.width
  ) {
    ball.dy *= -1;
  }

  // Score
  if (ball.y > canvas.height) {
    aiScore++;
    resetBall();
  }

  if (ball.y < 0) {
    playerScore++;
    resetBall();
  }

  // AI movement (slower & smoother)
  ai.x += (ball.x - (ai.x + ai.width / 2)) * 0.04;

  // Keep paddles inside canvas
  player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
  ai.x = Math.max(0, Math.min(canvas.width - ai.width, ai.x));

  requestAnimationFrame(update);
}

update();
</script>

</body>
</html>

